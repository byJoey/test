[custom]
enable_rule_generator=true
overwrite_original_rules=true

###############################################################################
# 规则源
###############################################################################
ruleset=局域网直连,https://raw.githubusercontent.com/tindy2013/subconverter/master/base/rules/LocalAreaNetwork.list
ruleset=学术,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Scholar.list
ruleset=广告拦截,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/AdBlock.list
ruleset=Netflix,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/Netflix.list
ruleset=Spotify,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/Spotify.list
ruleset=迪士尼+,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/Disney%20Plus.list
ruleset=YouTube,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/YouTube.list
ruleset=YouTube 音乐,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/YouTube%20Music.list
ruleset=Max,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/Max.list

# lhie1 系列分流
ruleset=!!import:https://gist.githubusercontent.com/tindy2013/1fa08640a9088ac8652dbd40c5d2715b/raw/lhie1_cntv.list
ruleset=!!import:https://gist.githubusercontent.com/tindy2013/1fa08640a9088ac8652dbd40c5d2715b/raw/lhie1_appletv.list
ruleset=!!import:https://gist.githubusercontent.com/tindy2013/1fa08640a9088ac8652dbd40c5d2715b/raw/lhie1_asiantv.list
ruleset=!!import:https://gist.githubusercontent.com/tindy2013/1fa08640a9088ac8652dbd40c5d2715b/raw/lhie1_globaltv.list

ruleset=电报,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Telegram.list
ruleset=Steam,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Steam.list
ruleset=测速,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Speedtest.list
ruleset=PayPal,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/PayPal.list
ruleset=微软,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Microsoft.list
ruleset=网易音乐,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Media/Netease%20Music.list
ruleset=特殊直连,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Special.list
ruleset=代理,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Proxy.list
ruleset=国内,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Domestic.list

ruleset=苹果,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Apple.list
ruleset=加密,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Crypto.list
ruleset=Discord,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Discord.list
ruleset=谷歌FCM,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Google%20FCM.list
ruleset=AI套件,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/AI%20Suite.list
ruleset=米哈游,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/miHoYo.list

# GEOIP & 匹配
ruleset=国内,[]GEOIP,CN
ruleset=其他,[]MATCH

###############################################################################
# 代理分组
###############################################################################
# 负载均衡
custom_proxy_group=负载均衡散列`load-balance`.*`http://www.google.com/generate_204`300
custom_proxy_group=负载均衡轮询`load-balance`.*`http://www.google.com/generate_204`300

# 自动测速
custom_proxy_group=自动测速`url-test`.*`http://cp.cloudflare.com/generate_204`1800

# 总控
custom_proxy_group=节点选择`select`[]负载均衡散列`[]负载均衡轮询`[]自动测速`[]DIRECT`.*
custom_proxy_group=国内访问`select`[]DIRECT`[]节点选择
custom_proxy_group=学术访问`select`[]DIRECT`[]节点选择`.*
custom_proxy_group=其他流量`select`[]节点选择`[]DIRECT
custom_proxy_group=广告拦截组`select`[]REJECT`[]DIRECT`[]节点选择
custom_proxy_group=苹果服务`select`[]DIRECT`[]节点选择

# 影视
custom_proxy_group=大陆电视`select`[]DIRECT`[]节点选择`(港|HK|台|TW)
custom_proxy_group=AppleTV`select`[]节点选择`[]DIRECT`.*
custom_proxy_group=亚洲电视`select`[]DIRECT`[]节点选择`(港|HK|台|TW)
custom_proxy_group=全球电视`select`[]节点选择`[]DIRECT`.*

# 流媒体
custom_proxy_group=迪士尼+`select`[]节点选择`[]DIRECT
custom_proxy_group=YouTube`select`[]节点选择`[]DIRECT
custom_proxy_group=Max`select`[]节点选择`[]DIRECT
custom_proxy_group=Netflix`select`[]节点选择`[]DIRECT`.*
custom_proxy_group=Spotify`select`[]节点选择`[]DIRECT`.*

# 平台 / 服务
custom_proxy_group=电报`select`[]节点选择`[]DIRECT`.*
custom_proxy_group=Steam`select`[]节点选择`[]DIRECT
custom_proxy_group=测速组`select`[]节点选择`[]DIRECT`[]国内访问`.*
custom_proxy_group=PayPal`select`[]DIRECT`[]节点选择
custom_proxy_group=微软`select`[]节点选择`[]DIRECT
custom_proxy_group=网易音乐解锁`select`[]DIRECT`[]节点选择`(网易云|解锁)

custom_proxy_group=加密服务`select`[]节点选择`[]DIRECT
custom_proxy_group=Discord`select`[]节点选择`[]DIRECT
custom_proxy_group=谷歌FCM`select`[]节点选择`[]DIRECT
custom_proxy_group=AI套件`select`[]节点选择`[]DIRECT
custom_proxy_group=米哈游`select`[]节点选择`[]DIRECT

###############################################################################
# Surge 规则基底
###############################################################################
surge_rule_base=https://gist.githubusercontent.com/tindy2013/1fa08640a9088ac8652dbd40c5d2715b/raw/lhie1_surge.conf   # 在此基础上追加自定义

###############################################################################
# 以下 YAML 仅作用于 Clash Premium / Meta
###############################################################################
yaml:
  append-proxy-groups:
    - name: 负载均衡散列
      type: load-balance
      url: 'http://www.google.com/generate_204'
      interval: 300
      strategy: consistent-hashing
    - name: 负载均衡轮询
      type: load-balance
      url: 'http://www.google.com/generate_204'
      interval: 300
      strategy: round-robin
  commands:
    - proxy-groups.负载均衡散列.proxies=[]proxyNames
    - proxy-groups.节点选择.proxies.0+负载均衡散列
    - proxy-groups.负载均衡轮询.proxies=[]proxyNames
    - proxy-groups.节点选择.proxies.0+负载均衡轮询
